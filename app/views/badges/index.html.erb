<p style="color: green"><%= notice %></p>

<% content_for :title, "Badges" %>

<div class="container mt-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1>Badges</h1>
    <%= link_to "New badge", new_badge_path, class: "btn btn-success" %>
  </div>

  <!-- Filtro por Categoria -->
  <%= form_with url: badges_path, method: :get, local: true, class: "mb-4" do |form| %>
    <div class="form-row align-items-center">
      <div class="col-auto">
        <%= form.label :category_id, "Filtrar por Categoria:", class: "mr-2" %>
      </div>
      <div class="col-auto">
        <%= form.collection_select :category_id, Category.all, :id, :name, { include_blank: "Todas as Categorias" }, { class: "form-control" } %>
      </div>
      <div class="col-auto">
        <%= form.submit "Filtrar", class: "btn btn-info" %>
      </div>
    </div>
  <% end %>

  <!-- Lista de Badges -->
  <div class="row">
    <% @badges.each do |badge| %>
      <div class="col-md-4 mb-4">
        <div class="card h-100 shadow-sm">
        <img src="<%= badge.image_url %>" class="card-img-top" alt="<%= badge.name %>" style="height: 400px; width: 100%; object-fit: contain;">          <div class="card-body d-flex flex-column">
            <h5 class="card-title"><%= badge.name %></h5>
            <p class="card-text"><strong>Categoria:</strong> <%= badge.category.name %></p>
            <p class="card-text"><strong>Preço:</strong> <%= number_to_currency(badge.price, unit: "€", separator: ",", delimiter: ".", format: "%n %u") %></p>
            <div class="mt-auto">
              <div class="btn-group w-100">
                <%= link_to 'Mostrar', badge, class: "btn btn-sm btn-outline-primary flex-fill" %>
                <%= link_to 'Editar', edit_badge_path(badge), class: "btn btn-sm btn-outline-warning flex-fill" %>
                <%= link_to 'Excluir', badge, method: :delete, data: { confirm: 'Tem certeza?' }, class: "btn btn-sm btn-outline-danger flex-fill" %>
              </div>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>